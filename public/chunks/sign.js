(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{0:function(e,t){},1:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},AgpK:function(e,t,i){var r=i("nS3k");"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};i("aET+")(r,a);r.locals&&(e.exports=r.locals)},P2Wm:function(e,t,i){"use strict";i("AgpK")},nS3k:function(e,t,i){(e.exports=i("I1BE")(!1)).push([e.i,".sign-wrapper[data-v-1d709f18]{position:absolute;inset:0;background-color:#082247;max-height:100%;overflow:hidden}.header[data-v-1d709f18],.sign-wrapper[data-v-1d709f18]{width:100%;display:flex;flex-direction:column}.header[data-v-1d709f18]{justify-content:space-between;align-items:center;padding:1rem 2rem;background:#202d7c}.header .logo[data-v-1d709f18]{height:2rem}.header .logo img[data-v-1d709f18]{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;-o-object-position:center;object-position:center}.header .btn-sign[data-v-1d709f18]{border-radius:.5rem;padding:.5rem 1rem;color:#fff;background-color:transparent;border:2px solid #fff;margin-top:1rem;font-size:.75rem}.header .btn-sign[data-v-1d709f18]:hover{border-color:transparent;cursor:pointer}.footer[data-v-1d709f18]{margin-top:auto;padding:1rem 3rem;background-color:#011027;z-index:99}.footer p[data-v-1d709f18]{color:#fff}#pdf-wrapper[data-v-1d709f18]{overflow-y:scroll;margin:0 auto;position:absolute;top:8rem;left:0;right:0;bottom:0;z-index:1;height:80%}@media screen and (min-width:640px){#pdf-wrapper[data-v-1d709f18]{top:6rem}}.file-wrapper-preview[data-v-1d709f18]{padding:30px 0;overflow:hidden;background-color:transparent!important}.file-wrapper-preview[data-v-1d709f18],.file-wrapper-preview .file-wrapper[data-v-1d709f18]{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.file-wrapper-preview .file-wrapper .file-shadow[data-v-1d709f18]{box-shadow:0 8px 40px rgba(17,26,52,.05)}.file-wrapper-preview .file-wrapper .file[data-v-1d709f18]{max-width:100%;max-height:100%;align-self:center}.file-wrapper-preview .file-wrapper .audio[data-v-1d709f18]{border-radius:28px}.file-wrapper-preview .file-wrapper img[data-v-1d709f18]{border-radius:4px}.file-wrapper-preview .file-wrapper .video-wrapper[data-v-1d709f18]{max-width:1080px;max-height:100%}@media (min-width:1200px){.file-wrapper-preview .file-wrapper .video-wrapper[data-v-1d709f18]{max-width:800px}}@media (min-width:1920px) and (max-width:2560px){.file-wrapper-preview .file-wrapper .video-wrapper[data-v-1d709f18]{max-width:1080px}}@media (min-width:2560px) and (max-width:3840px){.file-wrapper-preview .file-wrapper .video-wrapper[data-v-1d709f18]{max-width:1440px}}@media (min-width:3840px){.file-wrapper-preview .file-wrapper .video-wrapper[data-v-1d709f18]{max-width:2160px}}.file-wrapper-preview .file-wrapper .video-wrapper .video[data-v-1d709f18]{max-width:100%;max-height:100%;align-self:center}@media (prefers-color-scheme:dark){.navigation-arrows .next[data-v-1d709f18],.navigation-arrows .prev[data-v-1d709f18]{color:#a4adb6;filter:drop-shadow(0 1px 0 #111314)}.file-wrapper-preview .file-wrapper .file-shadow[data-v-1d709f18]{box-shadow:0 8px 40px rgba(0,0,0,.1)}}.utilities[data-v-1d709f18]{background-color:rgba(0,0,0,.7);z-index:100;position:fixed;bottom:5rem;left:50%;transform:translateX(-50%);display:flex;align-items:center;padding:.8rem 1.2rem;border-radius:.7rem}.utilities>*[data-v-1d709f18]{color:#fff!important}.utilities>p[data-v-1d709f18]{font-size:.75em;font-weight:700;margin-right:1rem;white-space:nowrap}.utilities .zoom[data-v-1d709f18]{display:flex}.utilities .zoom>*[data-v-1d709f18]{margin-left:.5rem;margin-right:.5rem}.utilities .zoom *[data-v-1d709f18]{background-color:transparent;color:#fff;border:none}@media screen and (min-width:640px){.header[data-v-1d709f18]{padding:1.5rem 5rem;flex-direction:row}.header .logo[data-v-1d709f18]{width:8rem;height:auto}.header .btn-sign[data-v-1d709f18]{margin-top:0;font-size:1rem}.utilities>p[data-v-1d709f18]{font-size:.875em}}",""])},"oV+a":function(e,t,i){"use strict";i.r(t);var r=i("o0o1"),a=i.n(r),n=i("QzGz"),o=i("e3c5"),d=i.n(o),s=i("hY44"),p=i("CjXH"),f=i("xCqy");function c(e){return new Promise((function(t,i){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){i(e)},r.readAsDataURL(e)}))}function l(e){return new Promise((function(t,i){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){200===this.status?t(this.response):i(new Error("Could not load image"))},r.send()}))}function u(e){for(var t=e.indexOf(";base64,")+";base64,".length,i=e.substring(t),r=window.atob(i),a=r.length,n=new Uint8Array(new ArrayBuffer(a)),o=0;o<a;o++)n[o]=r.charCodeAt(o);return n}var m=i("4Zil"),h=i("YRIS");function v(e,t,i,r,a,n,o){try{var d=e[n](o),s=d.value}catch(e){return void i(e)}d.done?t(s):Promise.resolve(s).then(r,a)}var g={name:"SignView",components:{FilePreviewMedia:n.a,pdf:d.a,pdfx:s.a,SearchIcon:p.V,PlusIcon:p.R,MinusIcon:p.M,OTPModal:h.a},computed:{filename:function(){return this.$route.params.fileId+"."+this.$route.query.type},fileUrl:function(){return"http://192.168.1.7:8000/file/"+this.filename}},methods:{signDocument:function(e){this.isOTPModalOpen=!1,this.$store.dispatch("signDocument",{file:this.pdf64,page:this.numPages,otp:e,title:this.filename,signPos:this.signPos,reason:"Acceptance"})},setPageNumber:function(e){0!==this.numPages&&(this.numPages=e)},setSignPosition:function(e){var t=e.getPages(),i=t[t.length-1].getSize(),r=i.width,a=i.height;this.signPos={x:.15*r,y:.15*a}},getPdf:function(){var e,t=this;return(e=a.a.mark((function e(){var i,r,n,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.pdfdata=void 0,t.numPages=0,e.next=4,l(t.fileUrl);case 4:return i=e.sent,e.next=7,c(i);case 7:return r=e.sent,n=u(r),e.next=11,m.PDFDocument.load(n);case 11:o=e.sent,t.numPages=o.getPages().length,t.raw=o,t.pdfbin=n,t.pdf64=r,t.setSignPosition(o),t.pdfdata=s.a.createLoadingTask(n),setTimeout((function(){t.$refs.pdfwrapper.addEventListener("scroll",(function(e){var i=e.target.scrollTop/e.target.scrollHeight*100,r=Math.round(i/100*t.numPages);r!==t.currentIndex&&r<=t.numPages&&(t.currentIndex=r)}))}),1e3);case 19:case"end":return e.stop()}}),e)})),function(){var t=this,i=arguments;return new Promise((function(r,a){var n=e.apply(t,i);function o(e){v(n,r,a,o,d,"next",e)}function d(e){v(n,r,a,o,d,"throw",e)}o(void 0)}))})()},checkSign:function(){0==this.$store.getters.isLogged?this.$router.push("/login"):this.$store.getters.token||this.$router.push({name:"Profile",query:{create_signature:!0,msg:"Please create a signature",redirect:this.$route.fullPath}}),this.isOTPModalOpen=!0},getFilesForView:function(){var e=this,t=this.fileInfoDetail[0];this.data.map((function(i){"pdf"===t.mimetype?"pdf"===i.mimetype&&e.files.push(i):i.type===t.type&&e.files.push(i)})),this.files.forEach((function(t,i){t.id===e.fileInfoDetail[0].id&&(e.currentIndex=i)}))},increaseSizeOfPDF:function(){f.a.$emit("document-zoom:in")},decreaseSizeOfPDF:function(){f.a.$emit("document-zoom:out")}},data:function(){return{pdfdata:void 0,pdfbin:void 0,pdf64:void 0,signPos:void 0,isOTPModalOpen:!1,numPages:0,currentIndex:0,raw:void 0,files:[],documentSize:50}},created:function(){var e=this;this.documentSize=window.innerWidth<960?100:50,f.a.$on("file-preview:next",(function(){return e.next()})),f.a.$on("file-preview:prev",(function(){return e.prev()})),f.a.$on("document-zoom:in",(function(){e.documentSize<100&&(e.documentSize+=10)})),f.a.$on("document-zoom:out",(function(){e.documentSize>40&&(e.documentSize-=10)})),this.getPdf()}},w=(i("xUh6"),i("P2Wm"),i("KHd+")),x=Object(w.a)(g,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sign-wrapper"},[i("header",{staticClass:"header"},[i("router-link",{staticClass:"logo",attrs:{to:"/files"}},[i("img",{attrs:{src:"/assets/images/logo.png",alt:"Logo  "}})]),e._v(" "),i("button",{staticClass:"btn-sign",on:{click:e.checkSign}},[e._v("Sign Document")])],1),e._v(" "),i("main",[i("div",{staticClass:"file-wrapper-preview"},[i("div",{ref:"pdfwrapper",style:{width:e.documentSize+"%"},attrs:{id:"pdf-wrapper"}},[e._l(e.numPages,(function(t,r){return i("div",{key:r,staticStyle:{"margin-bottom":"16px"}},[i("pdfx",{attrs:{src:e.pdfdata,page:t}})],1)})),e._v(" "),i("div",{staticClass:"utilities"},[i("p",[e._v("Page "+e._s(e.currentIndex+1)+" / "+e._s(e.numPages))]),e._v(" "),i("div",{staticClass:"zoom"},[i("button",{staticClass:"btn-zoom-out",on:{click:e.decreaseSizeOfPDF}},[i("minus-icon",{attrs:{size:"1x"}})],1),e._v(" "),i("search-icon",{attrs:{size:"1.2x"}}),e._v(" "),i("button",{staticClass:"btn-zoom-in",on:{click:e.increaseSizeOfPDF}},[i("plus-icon",{attrs:{size:"1x"}})],1)],1)])],2)])]),e._v(" "),e._m(0),e._v(" "),i("OTPModal",{attrs:{open:e.isOTPModalOpen},on:{close:e.signDocument}})],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("footer",{staticClass:"footer"},[t("p",[this._v("Powered by Xignature")])])}],!1,null,"1d709f18",null);t.default=x.exports}}]);